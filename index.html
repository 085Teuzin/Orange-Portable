<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Orange Portable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff4500">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon.png">
    <style>
        :root { --p: #ff4500; }
        body { background-color: #000; color: #fff; -webkit-tap-highlight-color: transparent; overflow-x: hidden; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .card-active:active { transform: scale(0.98); border-color: var(--p); }
        #offline-screen { display: none; }
        body.is-offline #app-content { display: none; }
        body.is-offline #offline-screen { display: flex; }
    </style>
</head>
<body class="min-h-screen">
    <audio id="bg-music" src="sound.mp3" loop></audio>

    <div id="offline-screen" class="fixed inset-0 z-[100] bg-black flex-col items-center justify-center p-6 text-center">
        <span class="text-6xl mb-4">ğŸ“¡</span>
        <h1 class="text-2xl font-bold text-[#ff4500] mb-2">Sem ConexÃ£o</h1>
        <p class="text-gray-400">O Orange Portable requer internet para carregar a biblioteca. Verifique sua rede e tente novamente.</p>
        <button onclick="window.location.reload()" class="mt-6 bg-[#ff4500] px-8 py-3 rounded-full font-bold">Tentar Novamente</button>
    </div>

    <div id="app-content" class="w-full min-h-screen flex flex-col p-4 md:p-8">
        <header class="text-center mb-6">
            <h1 class="text-4xl font-black text-[#ff4500] tracking-tighter italic">Orange Portable</h1>
            <div class="flex items-center justify-center gap-2 mt-1">
                <h2 class="text-gray-500 text-sm uppercase tracking-widest">Games CSO for PPSSPP</h2>
                <button onclick="toggleMute()" id="m-btn" class="text-xs bg-zinc-900 border border-zinc-800 px-2 py-1 rounded text-[#ff4500]">ğŸ”Š</button>
            </div>
        </header>

        <section class="sticky top-0 z-40 bg-black/80 backdrop-blur-md pb-4">
            <input type="text" id="s" placeholder="Buscar..." onkeyup="f()" class="w-full bg-[#111] border border-zinc-800 p-4 rounded-xl mb-3 focus:border-[#ff4500] outline-none text-lg">
            <div class="flex gap-2">
                <select id="o" onchange="f()" class="w-full bg-[#111] border border-zinc-800 p-3 rounded-xl outline-none text-sm">
                    <option value="az">A-Z</option>
                    <option value="za">Z-A</option>
                </select>
            </div>
        </section>

        <nav id="ts" class="flex gap-2 overflow-x-auto hide-scroll pb-4 mb-2"></nav>

        <div id="stats" class="text-center text-[10px] text-[#ff4500] font-bold mb-4 uppercase tracking-tighter"></div>

        <button class="w-full bg-[#111] border border-[#ff4500] text-[#ff4500] py-4 rounded-xl font-bold mb-6 active:scale-95 transition-transform" onclick="rd()">ğŸ² Me surpreenda!</button>

        <main id="ct" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 flex-grow"></main>

        <section class="mt-10 p-6 bg-zinc-950 border border-zinc-900 rounded-3xl text-center">
            <div class="bg-white p-2 inline-block rounded-xl mb-4">
                <img src="https://api.qrserver.com/v1/create-qr-code/?data=00020126580014br.gov.bcb.pix01361cb3b52c-7693-4e44-a5c3-abd2d1fb90b45204000053039865802BR5925MATEUS VINICIUS DO NASCIM6009Sao Paulo62290525REC69906F1AAC2B2372646262630448A2" class="w-32 h-32">
            </div>
            <button id="pix" onclick="cp()" class="w-full bg-[#22c55e] py-4 rounded-xl font-bold mb-3">ğŸ“‹ <span>Copiar Pix</span></button>
            <a href="https://api.whatsapp.com/send?phone=5585991272125&text=Fala,%20Teuzin!%20Suporte%20Orange%20Portable." class="block w-full border border-[#ff4500] text-[#ff4500] py-4 rounded-xl font-bold">ğŸ’¬ Suporte</a>
        </section>

        <button id="up" onclick="window.scrollTo({top:0,behavior:'smooth'})" class="fixed bottom-6 right-6 bg-[#ff4500] w-12 h-12 rounded-full hidden z-50 shadow-lg shadow-orange-900/20">â–²</button>
    </div>

    <div id="md" class="fixed inset-0 z-[60] bg-black/95 hidden items-center justify-center p-4" onclick="cl()">
        <div class="bg-[#111] border border-[#ff4500] w-full max-w-md p-8 rounded-3xl relative" onclick="event.stopPropagation()">
            <button onclick="cl()" class="absolute top-4 right-4 text-zinc-500 text-xl">âœ•</button>
            <h2 id="mt" class="text-2xl font-bold text-[#ff4500] mb-4"></h2>
            <p id="mds" class="text-zinc-400 text-sm leading-relaxed mb-6"></p>
            <div class="flex justify-between pt-4 border-t border-zinc-800 text-xs">
                <span>ğŸ“… <b id="mrl" class="text-white"></b></span>
                <span>ğŸ® <b id="mcp" class="uppercase"></b></span>
            </div>
        </div>
    </div>

    <script src="database.js"></script>
    <script src="infobase.js"></script>
    <script>
        function checkConn() {
            if (!navigator.onLine) document.body.classList.add('is-offline');
            else document.body.classList.remove('is-offline');
        }
        window.addEventListener('online', checkConn);
        window.addEventListener('offline', checkConn);
        checkConn();

        const gs=window.gamesData||[], ct=document.getElementById('ct'), audio=document.getElementById('bg-music');
        let fv=JSON.parse(localStorage.getItem('fav'))||[], at="Todos", pt;

        function playMusic() {
            audio.play().catch(() => {
                document.addEventListener('click', () => { audio.play(); }, { once: true });
            });
        }

        function toggleMute() {
            audio.muted = !audio.muted;
            document.getElementById('m-btn').innerText = audio.muted ? 'ğŸ”‡' : 'ğŸ”Š';
        }

        function it() {
            const t=document.getElementById('ts'); t.innerHTML='';
            let l=["Todos"]; if(fv.length) l.push("â¤ï¸ Favoritos");
            [...new Set(gs.map(g=>g.category))].sort().forEach(x=>l.push(x));
            l.forEach(x=>{
                const e=document.createElement('div');
                e.className=`px-5 py-2 rounded-full text-xs whitespace-nowrap cursor-pointer transition ${x==at?'bg-[#ff4500] text-white font-bold':'bg-zinc-900 text-zinc-500 border border-zinc-800'}`;
                e.innerText=x; e.onclick=()=>{at=x; it(); f()};
                t.appendChild(e);
            });
        }

        function f() {
            const q=document.getElementById('s').value.toLowerCase(), ord=document.getElementById('o').value;
            let res=gs.filter(g=>(g.name.toLowerCase().includes(q))&&(at=="Todos"||(at=="â¤ï¸ Favoritos"?fv.includes(g.name):g.category==at)));
            res.sort((a,b)=>ord=='az'?a.name.localeCompare(b.name):b.name.localeCompare(a.name));
            document.getElementById('stats').innerText=`${res.length} jogos encontrados`;
            ct.innerHTML='';
            res.forEach(g=>{
                const is=fv.includes(g.name);
                const d=document.createElement('div');
                d.className='bg-zinc-900/50 border border-zinc-800 p-4 rounded-2xl flex justify-between items-center card-active transition-all';
                d.onmousedown=d.ontouchstart=()=>{pt=setTimeout(()=>sh(g.name),600)};
                d.onmouseup=d.onmouseleave=d.ontouchend=()=>{clearTimeout(pt)};
                d.innerHTML=`
                    <div class="overflow-hidden">
                        <h3 class="text-zinc-100 font-medium truncate pr-2">${g.name}</h3>
                        <span class="text-[10px] bg-black text-[#ff4500] px-2 py-1 rounded border border-zinc-800 font-bold uppercase">${g.size}</span>
                    </div>
                    <div class="flex gap-4 items-center">
                        <button class="text-2xl transition ${is?'grayscale-0 scale-110':'grayscale opacity-30'}" onclick="event.stopPropagation();tf('${g.name.replace(/'/g,"\\'")}')">â¤ï¸</button>
                        <a href="${g.link}" class="bg-[#ff4500] w-10 h-10 rounded-full flex items-center justify-center shadow-lg shadow-orange-900/20" onclick="event.stopPropagation()">â¬‡ï¸</a>
                    </div>`;
                ct.appendChild(d);
            });
        }

        function tf(n){fv=fv.includes(n)?fv.filter(x=>x!=n):[...fv,n];localStorage.setItem('fav',JSON.stringify(fv));it();f()}
        function sh(n){
            const i=(window.gamesInfo&&window.gamesInfo[n])?window.gamesInfo[n]:{description:"InformaÃ§Ãµes nÃ£o disponÃ­veis.",release:"-",compat:"-"};
            document.getElementById('mt').innerText=n;
            document.getElementById('mds').innerText=i.description;
            document.getElementById('mrl').innerText=i.release;
            const cpEl=document.getElementById('mcp');
            cpEl.innerText=i.compat;
            cpEl.style.color=i.compat=="Ã“tima"?"#22c55e":(i.compat=="Boa"?"#facc15":"#f40");
            document.getElementById('md').style.display="flex";
        }
        function cl(){document.getElementById('md').style.display="none"}
        function rd(){if(gs.length)sh(gs[Math.floor(Math.random()*gs.length)].name)}
        function cp(){navigator.clipboard.writeText("00020126580014br.gov.bcb.pix01361cb3b52c-7693-4e44-a5c3-abd2d1fb90b45204000053039865802BR5925MATEUS VINICIUS DO NASCIM6009Sao Paulo62290525REC69906F1AAC2B2372646262630448A2");const s=document.querySelector('#pix span');s.innerText="Copiado!";setTimeout(()=>s.innerText="Copiar Pix",2e3)}
        window.onscroll=()=>document.getElementById("up").style.display=window.scrollY>300?"block":"none";
        it();f();playMusic();
    </script>
</body>
</html>